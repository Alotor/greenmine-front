<div class="header-container container-fluid" ng-include="'partials/header.html'"></div>
<div class="middle-container container-fluid dashboard">
    <div class="row-fluid first-row stats-row">
        <div class="span12">
            <div class="stats-container">
                <div class="row-fluid">
                    <div class="span8">
                        <div class="graphics-box"></div>
                    </div>
                    <div class="span4">
                        <div class="information-box">
                            <div class="info-header">
                                <div class="sprint-progress">
                                    <div class="progress">
                                        <div class="bar" style="width: 20%"></div>
                                    </div>

                                    <div class="indicator">20%</div>
                                    <div class="help">completed<br />points</div>
                                </div>
                            </div>
                            <div class="info-rows">
                                <div class="row-item">
                                    <div class="row-label">Points</div>
                                    <div class="row-indiator">120</div>
                                    <div class="row-help">unassigned <br />points</div>
                                    <div class="row-indiator">100</div>
                                    <div class="row-help">assigned <br />points</div>
                                </div>

                                <div class="row-item">
                                    <div class="row-label">U Stories</div>
                                    <div class="row-indiator">120</div>
                                    <div class="row-help">unassigned <br />points</div>
                                    <div class="row-indiator">100</div>
                                    <div class="row-help">assigned <br />points</div>
                                </div>

                                <div class="row-item">
                                    <div class="row-label">Tasks</div>
                                    <div class="row-indiator">120</div>
                                    <div class="row-help">unassigned <br />points</div>
                                    <div class="row-indiator">100</div>
                                    <div class="row-help">assigned <br />points</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row-fluid first-row">
        <div class="span12">
            <div class="tasks-container">
                <div class="header">
                    <table>
                        <tbody>
                            <tr>
                                <td class="row-us-description"></td>
                                <td class="row-new-tasks">
                                    <div class="badge">New</div>
                                </td>
                                <td class="row-inprogress-tasks">
                                    <div class="badge badge-inprogress">In progress</div>
                                </td>
                                <td class="row-readytest-tasks">
                                    <div class="badge badge-readytest">Ready for test</div>
                                </td>
                                <td class="row-finished-tasks">
                                    <div class="badge badge-finish">Closed</div>
                                </td>
                                <td class="row-rejected-tasks">
                                    <div class="badge">Needs Info</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="body" gm-newtask-modal=".row-us-description .new-task">
                    <table ng-repeat="us in userstories" ng-controller="DashboardUserStoryController">
                        <tbody>
                            <tr>
                                <td class="row-us-description">
                                    <div class="info">
                                        <div class="title">{{ us.subject }}</div>
                                        <div class="description">
                                            <p>Helvetica keffiyeh consectetur, nesciunt biodiesel letterpress Austin pickled pour-over non aesthetic scenester sunt. Aesthetic brunch deserunt, beard flannel deep v pork belly laborum mollit tofu godard hoodie selvage semiotics. Esse kale chips viral eiusmod, officia selfies chambray nihil fugiat banjo culpa mlkshk id commodo beard.</p>
                                        </div>
                                    </div>
                                    <div class="options">
                                        <ul>
                                            <li><i class="icon-plus-sign icon-white"></i>
                                                <a href="" class="new-task">New task</a>
                                            </li>
                                        </ul>
                                    </div>
                                </td>
                                <td class="row-new-tasks">
                                    <div class="tasks" ui-sortable=".tasks-container .body .tasks" ng-model="usTasks[us.id][1]">
                                        <div class="task-box" ng-repeat="task in usTasks[us.id][1]"
                                            ng-include="'partials/dashboard-task.html'"></div>
                                    </div>
                                </td>
                                <td class="row-inprogress-tasks">
                                    <div class="tasks" ui-sortable=".tasks-container .body .tasks" ng-model="usTasks[us.id][2]">
                                        <div class="task-box" ng-repeat="task in usTasks[us.id][2]"
                                            ng-include="'partials/dashboard-task.html'"></div>
                                    </div>
                                </td>
                                <td class="row-readytest-tasks">
                                    <div class="tasks" ui-sortable=".tasks-container .body .tasks" ng-model="usTasks[us.id][4]">
                                        <div class="task-box" ng-repeat="task in usTasks[us.id][4]"
                                            ng-include="'partials/dashboard-task.html'"></div>
                                    </div>
                                </td>
                                <td class="row-finished-tasks">
                                    <div class="tasks" ui-sortable=".tasks-container .body .tasks" ng-model="usTasks[us.id][5]">
                                        <div class="task-box" ng-repeat="task in usTasks[us.id][5]"
                                            ng-include="'partials/dashboard-task.html'"></div>
                                    </div>
                                </td>
                                <td class="row-needsinfo-tasks">
                                    <div class="tasks" ui-sortable=".tasks-container .body .tasks" ng-model="usTasks[us.id][3]">
                                        <div class="task-box" ng-repeat="task in usTasks[us.id][3]"
                                            ng-include="'partials/dashboard-task.html'"></div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="dialogs hidden">
        <div class="developers-popover" id="developers-popover">
            Select a developer:
            <ul>
                <li><a href="" data-dev-id="">Unassigned</a>
                <li ng-repeat="dev in developers">
                    <a href="" data-dev-id="{{ dev.id }}">{{ dev.name }}</a>
                </li>
            </ul>
        </div>

    </div>
    <div class="new-task-modal modal hide fade" id="new-task-modal">
        <div class="form-container">
        <form ui-parsley="createNewTask()">
            <h4>Create new tasks:</h4>
            <p>Put one task title per line. You can use some indicators to automaticaly
            put the task in some state.</p>
            <ul>
                <li><b>!inprogress</b> as a firt word in a line, indicates that task must be
                    created on "inprogress" state.</li>
            </ul>

            <fieldset>
                <input type="hidden" value="" class="us-id" ng-model="newtaskForm.usId"></input>
                <textarea ng-model="newtaskForm.tasks"></textarea>
            </fieldset>

            <div class="buttons">
                <input type="submit" class="btn btn-success" value="Save"></input>
                <a class="btn cancel">Cancel</a>
            </div>
        </form>
    </div>
</div>
